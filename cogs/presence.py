# Basic script to modify bot presence
# Written on 9/7/2024 (Septiembre de Siete, dos mil vientecuarto) -> September 9th, 2024

# I recommend you not modify this file.. or any file
#                                        unless there's any sort of issue. (contact me)

# Made with <3 by Suno

# --> libs <--
import discord
from discord.ext import commands, tasks

# --> main module <--
class presence(commands.Cog):
    def __init__(self, app):
        self.app = app
        self.update_presence.start()

    def cog_unload(self):
        self.update_presence.cancel()

    @tasks.loop(minutes=5)
    async def update_presence(self):
        servers = len(self.app.guilds)
        activity = discord.Activity(type=discord.ActivityType.watching, name=f"{servers} servers!")

        await self.app.change_presence(activity=activity)

    @update_presence.before_loop
    async def initial_update(self):
        await self.app.wait_until_ready()

async def setup(app: commands.Bot) -> None:
    await app.add_cog(presence(app))
