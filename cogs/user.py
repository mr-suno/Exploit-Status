# Simple user commands
# Written on 9/7/2024 (Septiembre de Nueve, dos mil vientecuarto) -> September 9th, 2024

# I recommend you not modify this file.. or any file
#                                        unless there's any sort of issue. (contact me)

# Made with <3 by Suno

# --> libs <--
import discord
import requests
import json
from discord.ext import commands


# --> constants <--
host = "https://weao.xyz/api"

def pullAPI(endpoint):
    pull = requests.get(
        url=f"{host}/{endpoint}",
    )
    return pull.json()

# --> main module <--
class user(commands.Cog):
    def __init__(self, app: commands.Bot):
        self.app = app

    # --> commands <--
    @commands.hybrid_command(name="version", description="Returns the latest Roblox version, and upload date.", aliases=["ver", "roblox-ver", "rver", "rover"])
    async def version(self, CTX: commands.Context):
        data = pullAPI("versions/current")

        embed = discord.Embed(description="### Roblox Information\n**→** ‎ Latest version information from Roblox.", color=0x302c34)
        embed.add_field(name="Windows", value=f"* **Version**: {data.get("Windows")}\n* **Upload Date**: {data.get("WindowsDate").split(",")[0]}", inline=True)
        embed.add_field(name="MacOS", value=f"* **Version**: {data.get("Mac")}\n* **Upload Date**: {data.get("MacDate").split(",")[0]}")
        embed.set_author(name="View source-code over on GitHub", icon_url="https://www.pinclipart.com/picdir/big/35-354768_circle-clipart.png", url="https://github.com/mr-suno/Exploit-Status")
       
        if isinstance(CTX, commands.Context):
            await CTX.send(embed=embed)
        elif isinstance(CTX, discord.Interaction):
            await CTX.response.send_message(embed=embed)

async def setup(app: commands.Bot) -> None:
    await app.add_cog(user(app))
