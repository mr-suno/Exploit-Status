# Uses weao.xyz (whatexploitsare.online) public API
# Bot created by Suno

# Written on 9/7/2024 (Septiembre de Siete, dos mil vientecuarto) -> September 9th, 2024

# DM me in regards of any issues, bugs, or any problems in general
#                                 of this bot.

# Made with <3 by suno

# --> libs <--
import discord
import json
import os
import asyncio
from discord.ext import commands

# --> constants <--
with open("settings.json", "r") as settings:
    file = json.load(settings)
    prefix = file["prefix"]

app = commands.Bot(command_prefix=prefix, intents=discord.Intents.all(), help_command=None)

# --> loading <--
@app.event
async def on_ready():
    await app.change_presence(activity=discord.Activity(type=discord.ActivityType.listening, name="weao.xyz"))

    print("Boom! Fully loaded, ready for production use. ✅")

# --> admin commands <--
def is_owner():
    async def predicate(CTX: commands.Context):
        return CTX.author.id == 1002377371892072498
    return commands.check(predicate)

@app.command()
@is_owner()
async def sync(CTX: commands.Context):
    await app.tree.sync()

    embed = discord.Embed(description="### Commands Synced\n**→** ‎ All commands synced!\n* Please use **CTRL + R** or **CMD + R** to refresh Discord, or close and re-open the app to load new commands.", color=0x302c34)
    embed.set_author(name="View source-code over on GitHub", icon_url="https://www.pinclipart.com/picdir/big/35-354768_circle-clipart.png", url="https://github.com/mr-suno/Exploit-Status")

    await CTX.send(embed=embed)

for cog in os.listdir("./cogs"):
    if cog.endswith(".py"):
        asyncio.run(app.load_extension(f"cogs.{cog[:-3]}"))

# --> login <--
with open ("secrets.json", "r") as secrets:
    file = json.load(secrets)
    token = file["app-token"]

app.run(token=token)
